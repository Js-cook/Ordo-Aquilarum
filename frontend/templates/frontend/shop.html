{% extends 'base.html' %}

{% block title %}Shop{% endblock %}

{% block content %}
<p class="d-none" id="username">{{user.username}}</p>
<nav class="navbar bg-light">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1">Account Balance: {{user.points}} points</span>
  </div>
</nav>
<div class="container mt-3">
  <h1>Shop</h1>
  <p>Welcome to the shop! I have numerous wares that can be yours...for a price of course. NOTE: Roles are currently one time use! (meaning if you buy a new role, it will replace your old role and you will have to buy your old role again so choose wisely!)</p>
</div>
<hr>
<div class="container mt-4">
  <h2>Point Multipliers</h2>
  <p>Want more 'bang for your buck' after correctly answering a question? A point multiplier may be of some assistance. Point multipliers are automatically applied upon purchase.</p>
  <p id="current-mult">Current Multiplier:</p>
  <div class="d-flex justify-content-center">
    <div class="card" style="width: 18rem;">
      <img src="..." class="card-img-top" alt="...">
      <div class="card-body">
        <h5 class="card-title">Card title</h5>
        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
        <a href="#" class="btn btn-primary">Go somewhere</a>
      </div>
    </div>
  </div>
</div>
<hr>
<div class="container mt-4">
  <h2>Insurance</h2>
  <p>On the wrong type of answer streak? Some insurance might soften the point blow from an incorrect answer. Insurance is automatically applied upon purchase.</p>
  <p id="current-insur">Current coverage:</p>
  <div class="d-flex justify-content-center">
    <div class="card" style="width: 18rem;">
      <img src="..." class="card-img-top" alt="...">
      <div class="card-body">
        <h5 class="card-title">Card title</h5>
        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
        <a href="#" class="btn btn-primary">Go somewhere</a>
      </div>
    </div>
  </div>
</div>
<hr>
<div class="container mt-4">
  <h2>Roles</h2>
  <p>Want to make your profile stand out? A special role might spice up your profile and show others your skills. </p>
  <p id="current-role">Current Role:</p>
  <div class="d-flex justify-content-center">
    <div class="card" style="width: 18rem;">
      <img src="..." class="card-img-top" alt="...">
      <div class="card-body">
        <h5 class="card-title">Card title</h5>
        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
        <a href="#" class="btn btn-primary">Go somewhere</a>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  var user = document.getElementById("username").innerHTML
  var url = `https://ordo-aquilarum.p3rplexed.repl.co/api/retrieve-stats/${user}/`
  var multContainer = document.getElementById("current-mult")
  var insurContainer = document.getElementById("current-insur")
  var roleContainer = document.getElementById("current-role")
  fetch(url)
  .then((resp) => resp.json())
  .then(function(data){
    multContainer.innerHTML += ` ${data.points_multiplier}x`
    // insurContainer.innerHTML += data.points_insurance
    roleContainer.innerHTML += ` ${data.role}`
    if (data.points_insurance == 1){
      insurContainer.innerHTML += " Uninsured"
    }
    else {
      insurContainer.innerHTML += ` 1/${data.points_insurance} reduction in point deduction`
    }
  })

  function insuranceCard(insurance){
    if (insurance == 1){
      // fill for 3
    }
    else if (insurance == 3){
      // fill for 10
    }
    else if (insurance == 10){
      // fill for 15
    }
    else {
      // disable button and change text
    }
  }
  function multiplierCard(multiplier){
    
  }
  function roleCard(role){
    
  }
</script>
{% endblock %}